{
  "actions": [
    {
      "label": "Run",
      "command": "bash",
      "args": [
        "-lc",
        "docker compose -f compose.dev.yml up --build"
      ],
      "env": {
        "HOST_PORT": "{HOST_PORT}",
        "DOCKBRIDGE_AUTOREGISTER": "{DOCKBRIDGE_AUTOREGISTER}",
        "DOCKBRIDGE_AUTOJOIN": "{DOCKBRIDGE_AUTOJOIN}"
      }
    },
    {
      "args": [
        "-lc",
        "IFS=',' read -r -a LOADERS <<< \"{loader}\"; for LOADER in \"${LOADERS[@]}\"; do ./gradlew :loader-${LOADER}:build --build-cache --parallel -PmcVersion={mcVersion} -Ploader_cache_file={loader_cache_file} -PonlyLoader=${LOADER}; mkdir -p release/${LOADER}; for JAR in loader-${LOADER}/build/libs/*.jar; do case \"$JAR\" in *-sources.jar|*sources.jar|*-dev.jar|*dev.jar) continue;; esac; cp -v \"$JAR\" release/${LOADER}/; done; done"
      ],
      "command": "bash",
      "data": {
        "CLEAN_RELEASE_DIR": "1",
        "CLEAN_RELEASE_DIR_AFTER": "1"
      },
      "deployTargets": {
        "defaults": [
          "s3",
          "modrinth"
        ],
        "options": [
          "s3",
          "modrinth"
        ],
        "remember": true,
        "title": "Deploy targets"
      },
      "label": "Deploy mod",
      "targetSelect": {
        "defaults": [
          "fabric"
        ],
        "key": "loader",
        "options": [
          "fabric",
          "neoforge",
          "paper",
          "velocity"
        ],
        "remember": true,
        "separator": ",",
        "title": "Deploy loaders"
      },
      "uploads": [
        {
          "path": "release/**"
        }
      ]
    }
  ],
  "defaults": {
    "loader": "fabric",
    "version": "1.21.11",
    "runMode": "client"
  },
  "gradleArgs": [
    "--build-cache",
    "--parallel",
    "-PmcVersion={mcVersion}",
    "-Ploader_cache_file={loader_cache_file}",
    "-PonlyLoader={loader}"
  ],
  "gradleArgsByLoader": {
    "fabric": [
      "-PskipNeoForge=true"
    ],
    "neoforge": [
      "-PforceNeoForge=true"
    ],
    "paper": [
      "-PskipNeoForge=true"
    ],
    "velocity": [
      "-PskipNeoForge=true"
    ]
  },
  "group": "uebliche/public",
  "id": "template/mod-template",
  "kind": "project",
  "changelogPath": "../../docs/mod-template/changelog.md",
  "loaderSource": "matrix",
  "modrinth": {
    "projectId": "xMkfPrwZ"
  },
  "name": "Mod Template",
  "runModes": [
    "client",
    "server"
  ],
  "serverOnlyLoaders": [
    "paper",
    "velocity"
  ],
  "tasks": {
    "build": "build",
    "runClient": "runClient",
    "runServer": "runServer",
    "template": ":loader-{loader}:{task}"
  },
  "vars": [
    {
      "key": "HOST_PORT",
      "label": "Docker host port (0 = auto)",
      "default": "0"
    },
    {
      "key": "DOCKBRIDGE_AUTOREGISTER",
      "label": "DockBridge autoregister",
      "default": "1",
      "options": [
        "0",
        "1"
      ]
    },
    {
      "key": "DOCKBRIDGE_AUTOJOIN",
      "label": "DockBridge autojoin",
      "default": "0",
      "options": [
        "0",
        "1"
      ]
    }
  ]
}
